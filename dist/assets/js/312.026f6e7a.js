"use strict";(self["webpackChunkresearch_task_manager"]=self["webpackChunkresearch_task_manager"]||[]).push([[312],{2489:function(e,a,s){var t=s(6518),l=s(9565),n=s(9306),o=s(8551),r=s(1767),i=s(9462),u=s(6319),c=s(6395),d=i((function(){var e,a,s,t=this.iterator,n=this.predicate,r=this.next;while(1){if(e=o(l(r,t)),a=this.done=!!e.done,a)return;if(s=e.value,u(t,n,[s,this.counter++],!0))return s}}));t({target:"Iterator",proto:!0,real:!0,forced:c},{filter:function(e){return o(this),n(e),new d(r(this),{predicate:e})}})},3314:function(e,a,s){s.r(a),s.d(a,{default:function(){return oe}});var t=s(641),l=s(3751),n=s(33),o=s.p+"assets/img/researcher.31bc5979.png";const r={class:"fade-in"},i={class:"flex justify-between items-center mb-6"},u={class:"bg-white rounded-lg shadow-md p-4 mb-6"},c={class:"flex flex-wrap gap-4"},d={class:"relative"},k={class:"task-board"},m={class:"flex justify-between items-center mb-4"},p={class:"font-bold text-gray-700"},v={class:"bg-gray-200 text-gray-700 text-sm py-1 px-2 rounded-full"},g=["id","data-column-id"],b=["data-task-id","onClick"],f={class:"flex justify-between items-start"},y={class:"font-medium text-gray-800"},L={key:0,class:"text-sm text-gray-600 mt-2"},x={class:"flex justify-between items-center mt-3"},T={class:"flex space-x-1 space-x-reverse"},h={class:"text-xs text-gray-500"},C={key:1,class:"mt-3 flex items-center text-xs text-gray-500"},w={class:"modal-content"},E={class:"flex justify-between items-center mb-4"},K={class:"text-xl font-bold text-gray-800"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},D=["value"],_={class:"mb-4"},V={class:"mb-4"},R={class:"flex flex-wrap gap-2 mt-2"},F=["onClick"],U={class:"mb-4"},j={class:"mb-4"},I={class:"bg-gray-50 p-3 rounded-lg max-h-40 overflow-y-auto mb-2"},A={key:0,class:"text-gray-500 text-sm"},O={class:"flex items-start"},P={class:"bg-white p-2 rounded-lg shadow-sm flex-grow"},J={class:"text-sm"},M={class:"flex"},Q={class:"flex justify-between"},N={class:"modal-content"},$={class:"flex justify-between items-center mb-4"},W={class:"mb-4"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},q=["value"],z={class:"mb-4"},Z={class:"mb-4"},B={class:"flex flex-wrap gap-2 mt-2"},G=["onClick"],H={class:"mb-4"},Y={class:"flex justify-end"};function ee(e,a,s,ee,ae,se){return(0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",i,[a[28]||(a[28]=(0,t.Lk)("h1",{class:"text-2xl font-bold text-gray-800"},"إدارة المهام",-1)),(0,t.Lk)("button",{onClick:a[0]||(a[0]=e=>ee.showAddTaskModal=!0),class:"btn btn-primary"},a[27]||(a[27]=[(0,t.Lk)("i",{class:"fas fa-plus ml-2"},null,-1),(0,t.eW)("إضافة مهمة جديدة ")]))]),(0,t.Lk)("div",u,[(0,t.Lk)("div",c,[(0,t.Lk)("div",d,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>ee.searchQuery=e),placeholder:"بحث في المهام...",class:"form-input py-2 pl-10 pr-4"},null,512),[[l.Jo,ee.searchQuery]]),a[29]||(a[29]=(0,t.Lk)("i",{class:"fas fa-search absolute right-3 top-3 text-gray-400"},null,-1))]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>ee.filterPriority=e),class:"form-input py-2"},a[30]||(a[30]=[(0,t.Lk)("option",{value:""},"كل الأولويات",-1),(0,t.Lk)("option",{value:"عاجل"},"عاجل",-1),(0,t.Lk)("option",{value:"متوسط"},"متوسط",-1),(0,t.Lk)("option",{value:"منخفض"},"منخفض",-1)]),512),[[l.u1,ee.filterPriority]]),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>ee.filterTag=e),class:"form-input py-2"},a[31]||(a[31]=[(0,t.Fv)('<option value="">كل التصنيفات</option><option value="بحث">بحث</option><option value="كتابة">كتابة</option><option value="تحليل">تحليل</option><option value="تسجيل">تسجيل</option><option value="مراجعة">مراجعة</option>',6)]),512),[[l.u1,ee.filterTag]])])]),(0,t.Lk)("div",k,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.columns,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"task-column"},[(0,t.Lk)("div",m,[(0,t.Lk)("h3",p,(0,n.v_)(e.name),1),(0,t.Lk)("span",v,(0,n.v_)(ee.getTasksForColumn(e.id).length),1)]),(0,t.Lk)("div",{class:"min-h-[200px]",id:e.id,"data-column-id":e.id},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.getTasksForColumn(e.id),(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"task-card","data-task-id":e.id,onClick:a=>ee.openTaskDetails(e)},[(0,t.Lk)("div",f,[(0,t.Lk)("h4",y,(0,n.v_)(e.name),1),(0,t.Lk)("span",{class:(0,n.C4)(["px-2 py-1 text-xs rounded-full",ee.getPriorityClass(e.priority)])},(0,n.v_)(e.priority),3)]),e.description?((0,t.uX)(),(0,t.CE)("p",L,(0,n.v_)(ee.truncateText(e.description,100)),1)):(0,t.Q3)("",!0),(0,t.Lk)("div",x,[(0,t.Lk)("div",T,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tags,(e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full"},(0,n.v_)(e),1)))),128))]),(0,t.Lk)("div",h,[a[32]||(a[32]=(0,t.Lk)("i",{class:"far fa-calendar-alt ml-1"},null,-1)),(0,t.eW)((0,n.v_)(e.dueDate||"لا يوجد موعد"),1)])]),e.assignee?((0,t.uX)(),(0,t.CE)("div",C,[a[33]||(a[33]=(0,t.Lk)("img",{src:o,alt:"task.assignee",class:"w-6 h-6 rounded-full ml-2"},null,-1)),(0,t.eW)(" "+(0,n.v_)(e.assignee),1)])):(0,t.Q3)("",!0)],8,b)))),128))],8,g)])))),128))]),ee.selectedTask?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal-overlay",onClick:a[16]||(a[16]=(0,l.D$)(((...e)=>ee.closeTaskDetails&&ee.closeTaskDetails(...e)),["self"]))},[(0,t.Lk)("div",w,[(0,t.Lk)("div",E,[(0,t.Lk)("h2",K,(0,n.v_)(ee.selectedTask.name),1),(0,t.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>ee.closeTaskDetails&&ee.closeTaskDetails(...e)),class:"text-gray-500 hover:text-gray-700"},a[34]||(a[34]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,t.Lk)("div",X,[(0,t.Lk)("div",null,[a[35]||(a[35]=(0,t.Lk)("label",{class:"form-label"},"الحالة",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>ee.selectedTask.column=e),class:"form-input"},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.columns,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,D)))),128))],512),[[l.u1,ee.selectedTask.column]])]),(0,t.Lk)("div",null,[a[37]||(a[37]=(0,t.Lk)("label",{class:"form-label"},"الأولوية",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>ee.selectedTask.priority=e),class:"form-input"},a[36]||(a[36]=[(0,t.Lk)("option",{value:"عاجل"},"عاجل",-1),(0,t.Lk)("option",{value:"متوسط"},"متوسط",-1),(0,t.Lk)("option",{value:"منخفض"},"منخفض",-1)]),512),[[l.u1,ee.selectedTask.priority]])]),(0,t.Lk)("div",null,[a[38]||(a[38]=(0,t.Lk)("label",{class:"form-label"},"تاريخ الاستحقاق",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date","onUpdate:modelValue":a[7]||(a[7]=e=>ee.selectedTask.dueDate=e),class:"form-input"},null,512),[[l.Jo,ee.selectedTask.dueDate]])])]),(0,t.Lk)("div",_,[a[39]||(a[39]=(0,t.Lk)("label",{class:"form-label"},"الوصف",-1)),(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[8]||(a[8]=e=>ee.selectedTask.description=e),rows:"4",class:"form-input"},null,512),[[l.Jo,ee.selectedTask.description]])]),(0,t.Lk)("div",V,[a[40]||(a[40]=(0,t.Lk)("label",{class:"form-label"},"التصنيفات",-1)),(0,t.Lk)("div",R,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.availableTags,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e,onClick:a=>ee.toggleTag(e),class:(0,n.C4)(["px-3 py-1 rounded-full text-sm cursor-pointer transition-colors",ee.selectedTask.tags&&ee.selectedTask.tags.includes(e)?"bg-primary-100 text-primary-800 border border-primary-300":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"])},(0,n.v_)(e),11,F)))),128))])]),(0,t.Lk)("div",U,[a[42]||(a[42]=(0,t.Lk)("label",{class:"form-label"},"المسؤول",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>ee.selectedTask.assignee=e),class:"form-input"},[a[41]||(a[41]=(0,t.Lk)("option",{value:""},"غير معين",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.users,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e},(0,n.v_)(e),1)))),128))],512),[[l.u1,ee.selectedTask.assignee]])]),(0,t.Lk)("div",j,[a[45]||(a[45]=(0,t.Lk)("label",{class:"form-label"},"التعليقات",-1)),(0,t.Lk)("div",I,[ee.selectedTask.comments&&0!==ee.selectedTask.comments.length?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:1},(0,t.pI)(ee.selectedTask.comments,((e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"mb-3"},[(0,t.Lk)("div",O,[a[44]||(a[44]=(0,t.Lk)("img",{src:o,alt:"صورة المستخدم",class:"w-8 h-8 rounded-full ml-2"},null,-1)),(0,t.Lk)("div",P,[(0,t.Lk)("p",J,(0,n.v_)(e),1),a[43]||(a[43]=(0,t.Lk)("span",{class:"text-xs text-gray-500"},"منذ دقائق",-1))])])])))),128)):((0,t.uX)(),(0,t.CE)("div",A," لا توجد تعليقات بعد "))]),(0,t.Lk)("div",M,[(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[10]||(a[10]=e=>ee.newComment=e),placeholder:"أضف تعليقًا...",class:"form-input flex-grow",onKeyup:a[11]||(a[11]=(0,l.jR)(((...e)=>ee.addComment&&ee.addComment(...e)),["enter"]))},null,544),[[l.Jo,ee.newComment]]),(0,t.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>ee.addComment&&ee.addComment(...e)),class:"btn btn-primary mr-2"}," إضافة ")])]),(0,t.Lk)("div",Q,[(0,t.Lk)("div",null,[(0,t.Lk)("button",{onClick:a[13]||(a[13]=(...e)=>ee.saveTaskChanges&&ee.saveTaskChanges(...e)),class:"btn btn-primary ml-2"}," حفظ التغييرات "),(0,t.Lk)("button",{onClick:a[14]||(a[14]=(...e)=>ee.closeTaskDetails&&ee.closeTaskDetails(...e)),class:"btn btn-outline"}," إلغاء ")]),(0,t.Lk)("button",{onClick:a[15]||(a[15]=(...e)=>ee.deleteTask&&ee.deleteTask(...e)),class:"btn btn-danger"},"حذف المهمة")])])])):(0,t.Q3)("",!0),ee.showAddTaskModal?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"modal-overlay",onClick:a[26]||(a[26]=(0,l.D$)((e=>ee.showAddTaskModal=!1),["self"]))},[(0,t.Lk)("div",N,[(0,t.Lk)("div",$,[a[47]||(a[47]=(0,t.Lk)("h2",{class:"text-xl font-bold text-gray-800"},"إضافة مهمة جديدة",-1)),(0,t.Lk)("button",{onClick:a[17]||(a[17]=e=>ee.showAddTaskModal=!1),class:"text-gray-500 hover:text-gray-700"},a[46]||(a[46]=[(0,t.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,t.Lk)("div",W,[a[48]||(a[48]=(0,t.Lk)("label",{class:"form-label"},"اسم المهمة",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text","onUpdate:modelValue":a[18]||(a[18]=e=>ee.newTask.name=e),class:"form-input",required:""},null,512),[[l.Jo,ee.newTask.name]])]),(0,t.Lk)("div",S,[(0,t.Lk)("div",null,[a[49]||(a[49]=(0,t.Lk)("label",{class:"form-label"},"الحالة",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[19]||(a[19]=e=>ee.newTask.column=e),class:"form-input"},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.columns,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.id,value:e.id},(0,n.v_)(e.name),9,q)))),128))],512),[[l.u1,ee.newTask.column]])]),(0,t.Lk)("div",null,[a[51]||(a[51]=(0,t.Lk)("label",{class:"form-label"},"الأولوية",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[20]||(a[20]=e=>ee.newTask.priority=e),class:"form-input"},a[50]||(a[50]=[(0,t.Lk)("option",{value:"عاجل"},"عاجل",-1),(0,t.Lk)("option",{value:"متوسط"},"متوسط",-1),(0,t.Lk)("option",{value:"منخفض"},"منخفض",-1)]),512),[[l.u1,ee.newTask.priority]])]),(0,t.Lk)("div",null,[a[52]||(a[52]=(0,t.Lk)("label",{class:"form-label"},"تاريخ الاستحقاق",-1)),(0,t.bo)((0,t.Lk)("input",{type:"date","onUpdate:modelValue":a[21]||(a[21]=e=>ee.newTask.dueDate=e),class:"form-input"},null,512),[[l.Jo,ee.newTask.dueDate]])])]),(0,t.Lk)("div",z,[a[53]||(a[53]=(0,t.Lk)("label",{class:"form-label"},"الوصف",-1)),(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[22]||(a[22]=e=>ee.newTask.description=e),rows:"4",class:"form-input"},null,512),[[l.Jo,ee.newTask.description]])]),(0,t.Lk)("div",Z,[a[54]||(a[54]=(0,t.Lk)("label",{class:"form-label"},"التصنيفات",-1)),(0,t.Lk)("div",B,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.availableTags,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e,onClick:a=>ee.toggleNewTaskTag(e),class:(0,n.C4)(["px-3 py-1 rounded-full text-sm cursor-pointer transition-colors",ee.newTask.tags.includes(e)?"bg-primary-100 text-primary-800 border border-primary-300":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"])},(0,n.v_)(e),11,G)))),128))])]),(0,t.Lk)("div",H,[a[56]||(a[56]=(0,t.Lk)("label",{class:"form-label"},"المسؤول",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":a[23]||(a[23]=e=>ee.newTask.assignee=e),class:"form-input"},[a[55]||(a[55]=(0,t.Lk)("option",{value:""},"غير معين",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(ee.users,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e},(0,n.v_)(e),1)))),128))],512),[[l.u1,ee.newTask.assignee]])]),(0,t.Lk)("div",Y,[(0,t.Lk)("button",{onClick:a[24]||(a[24]=e=>ee.showAddTaskModal=!1),class:"btn btn-outline ml-2"}," إلغاء "),(0,t.Lk)("button",{onClick:a[25]||(a[25]=(...e)=>ee.addNewTask&&ee.addNewTask(...e)),class:"btn btn-primary"}," إضافة المهمة ")])])])):(0,t.Q3)("",!0)])}s(4114),s(8111),s(2489),s(1701);var ae=s(953),se=s(9933),te={name:"Tasks",setup(){const e=(0,se.C3)(),a=(0,ae.KR)([{id:"tasks",name:"لم تبدأ بعد"},{id:"inprogress",name:"يتم العمل عليها"},{id:"review",name:"تحتاج مراجعة"},{id:"approved",name:"تمت"}]),s=(0,ae.KR)(["بحث","كتابة","تحليل","تسجيل","مراجعة"]),l=(0,ae.KR)(["د. مها","فاطمة"]),n=(0,ae.KR)([]),o=(0,ae.KR)(null),r=(0,ae.KR)(""),i=(0,ae.KR)(""),u=(0,ae.KR)(""),c=(0,ae.KR)(""),d=(0,ae.KR)(!1),k=(0,ae.KR)({name:"",description:"",column:"tasks",priority:"متوسط",dueDate:"",tags:[],assignee:"",comments:[]}),m=()=>{const a=(0,se.KR)(e,"tasks");(0,se.Zy)(a,(e=>{const a=e.val();n.value=a?Object.entries(a).map((([e,a])=>({id:e,...a,comments:a.comments||[],tags:a.tags||[]}))):[]}))},p=e=>n.value.filter((a=>a.column===e&&(!(i.value&&!a.name.includes(i.value)&&!a.description.includes(i.value))&&((!u.value||a.priority===u.value)&&!!(!c.value||a.tags&&a.tags.includes(c.value)))))),v=e=>{o.value={...e}},g=()=>{o.value=null,r.value=""},b=()=>{if(!o.value)return;const a=(0,se.KR)(e,`tasks/${o.value.id}`);(0,se.yo)(a,{name:o.value.name,description:o.value.description,column:o.value.column,priority:o.value.priority,dueDate:o.value.dueDate,tags:o.value.tags||[],assignee:o.value.assignee,comments:o.value.comments||[]}),g()},f=()=>{if(o.value&&confirm("هل أنت متأكد من حذف هذه المهمة؟")){const a=(0,se.KR)(e,`tasks/${o.value.id}`);(0,se.TF)(a),g()}},y=()=>{r.value.trim()&&o.value&&(o.value.comments||(o.value.comments=[]),o.value.comments.push(r.value.trim()),r.value="")},L=e=>{if(!o.value)return;o.value.tags||(o.value.tags=[]);const a=o.value.tags.indexOf(e);-1===a?o.value.tags.push(e):o.value.tags.splice(a,1)},x=e=>{const a=k.value.tags.indexOf(e);-1===a?k.value.tags.push(e):k.value.tags.splice(a,1)},T=()=>{if(!k.value.name.trim())return void alert("يرجى إدخال اسم المهمة");const a=(0,se.KR)(e,"tasks");(0,se.VC)(a,{name:k.value.name,description:k.value.description,column:k.value.column,priority:k.value.priority,dueDate:k.value.dueDate,tags:k.value.tags,assignee:k.value.assignee,comments:k.value.comments,dateCreated:(new Date).toISOString()}),k.value={name:"",description:"",column:"tasks",priority:"متوسط",dueDate:"",tags:[],assignee:"",comments:[]},d.value=!1},h=(e,a)=>e?e.length>a?e.substring(0,a)+"...":e:"",C=e=>{switch(e){case"عاجل":return"bg-red-100 text-red-800";case"متوسط":return"bg-yellow-100 text-yellow-800";case"منخفض":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,t.sV)((()=>{m(),console.log("Drag and drop would be initialized here")})),{columns:a,tasks:n,selectedTask:o,newComment:r,searchQuery:i,filterPriority:u,filterTag:c,availableTags:s,users:l,showAddTaskModal:d,newTask:k,getTasksForColumn:p,openTaskDetails:v,closeTaskDetails:g,saveTaskChanges:b,deleteTask:f,addComment:y,toggleTag:L,toggleNewTaskTag:x,addNewTask:T,truncateText:h,getPriorityClass:C}}},le=s(6262);const ne=(0,le.A)(te,[["render",ee]]);var oe=ne},4114:function(e,a,s){var t=s(6518),l=s(8981),n=s(6198),o=s(4527),r=s(6837),i=s(9039),u=i((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!c();t({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var a=l(this),s=n(a),t=arguments.length;r(s+t);for(var i=0;i<t;i++)a[s]=arguments[i],s++;return o(a,s),s}})},4376:function(e,a,s){var t=s(2195);e.exports=Array.isArray||function(e){return"Array"===t(e)}},4527:function(e,a,s){var t=s(3724),l=s(4376),n=TypeError,o=Object.getOwnPropertyDescriptor,r=t&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=r?function(e,a){if(l(e)&&!o(e,"length").writable)throw new n("Cannot set read only .length");return e.length=a}:function(e,a){return e.length=a}},6837:function(e){var a=TypeError,s=9007199254740991;e.exports=function(e){if(e>s)throw a("Maximum allowed index exceeded");return e}}}]);