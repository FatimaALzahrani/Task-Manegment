{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport { getDatabase, ref as dbRef, onValue, set, push, remove } from \"firebase/database\";\nexport default {\n  name: \"Data\",\n  setup() {\n    const db = getDatabase();\n    const children = ref([]);\n    const wordData = ref({});\n    const words = ref([]);\n    const averageDuration = ref(3.5);\n    const showAddChildModal = ref(false);\n    const showAddWordModal = ref(false);\n    const childForm = ref({\n      name: \"\",\n      age: \"\",\n      gender: \"ذكر\",\n      iq: \"\",\n      speechEvaluation: \"متوسط\"\n    });\n    const newWord = ref(\"\");\n    const editingChild = ref(false);\n    const editingChildId = ref(null);\n    const loadData = () => {\n      const childrenRef = dbRef(db, \"children\");\n      onValue(childrenRef, snapshot => {\n        const data = snapshot.val();\n        children.value = data ? Object.entries(data).map(([id, child]) => ({\n          id,\n          ...child\n        })) : [];\n      });\n      const wordsRef = dbRef(db, \"words\");\n      onValue(wordsRef, snapshot => {\n        const data = snapshot.val();\n        if (data) {\n          wordData.value = data;\n          const allWords = new Set();\n          Object.values(data).forEach(childWords => {\n            Object.keys(childWords).forEach(word => {\n              allWords.add(word);\n            });\n          });\n          words.value = Array.from(allWords);\n        } else {\n          wordData.value = {};\n          words.value = [];\n        }\n      });\n    };\n    const completionPercentage = computed(() => {\n      if (children.value.length === 0 || words.value.length === 0) return 0;\n      let totalWords = children.value.length * words.value.length;\n      let completedWords = 0;\n      children.value.forEach(child => {\n        words.value.forEach(word => {\n          if (isWordDone(child.id, word)) completedWords++;\n        });\n      });\n      return Math.round(completedWords / totalWords * 100);\n    });\n    const getWordLevel = (childId, word) => {\n      return wordData.value[childId]?.[word]?.level || \"ضعيف\";\n    };\n    const isWordDone = (childId, word) => {\n      return wordData.value[childId]?.[word]?.done || false;\n    };\n    const updateWordLevel = (childId, word, level) => {\n      const wordRef = dbRef(db, `words/${childId}/${word}`);\n      set(wordRef, {\n        level: level,\n        done: isWordDone(childId, word)\n      });\n    };\n    const updateWordDone = (childId, word, done) => {\n      const wordRef = dbRef(db, `words/${childId}/${word}`);\n      set(wordRef, {\n        level: getWordLevel(childId, word),\n        done: done\n      });\n    };\n    const editChild = child => {\n      childForm.value = {\n        name: child.name,\n        age: child.age,\n        gender: child.gender,\n        iq: child.iq,\n        speechEvaluation: child.speechEvaluation\n      };\n      editingChild.value = true;\n      editingChildId.value = child.id;\n      showAddChildModal.value = true;\n    };\n    const saveChild = () => {\n      if (!childForm.value.name.trim()) {\n        alert(\"يرجى إدخال اسم الطفل\");\n        return;\n      }\n      if (editingChild.value) {\n        const childRef = dbRef(db, `children/${editingChildId.value}`);\n        set(childRef, childForm.value);\n      } else {\n        const childRef = dbRef(db, `children/${childForm.value.name}`);\n        set(childRef, childForm.value);\n        words.value.forEach(word => {\n          const wordRef = dbRef(db, `words/${childForm.value.name}/${word}`);\n          set(wordRef, {\n            level: \"ضعيف\",\n            done: false\n          });\n        });\n      }\n      childForm.value = {\n        name: \"\",\n        age: \"\",\n        gender: \"ذكر\",\n        iq: \"\",\n        speechEvaluation: \"متوسط\"\n      };\n      editingChild.value = false;\n      editingChildId.value = null;\n      showAddChildModal.value = false;\n    };\n    const deleteChild = child => {\n      if (confirm(`هل أنت متأكد من حذف بيانات الطفل \"${child.name}\"؟`)) {\n        const childRef = dbRef(db, `children/${child.id}`);\n        remove(childRef);\n        const wordRef = dbRef(db, `words/${child.id}`);\n        remove(wordRef);\n      }\n    };\n    const addWord = () => {\n      if (!newWord.value.trim()) {\n        alert(\"يرجى إدخال الكلمة\");\n        return;\n      }\n      children.value.forEach(child => {\n        const wordRef = dbRef(db, `words/${child.id}/${newWord.value}`);\n        set(wordRef, {\n          level: \"ضعيف\",\n          done: false\n        });\n      });\n      newWord.value = \"\";\n      showAddWordModal.value = false;\n    };\n\n    // ✅ دالة حذف الكلمة\n    const deleteWord = wordToDelete => {\n      if (confirm(`هل أنت متأكد من حذف الكلمة \"${wordToDelete}\" من جميع الأطفال؟`)) {\n        children.value.forEach(child => {\n          const wordRef = dbRef(db, `words/${child.id}/${wordToDelete}`);\n          remove(wordRef);\n        });\n        words.value = words.value.filter(word => word !== wordToDelete);\n      }\n    };\n    onMounted(() => {\n      loadData();\n    });\n    return {\n      children,\n      words,\n      wordData,\n      averageDuration,\n      completionPercentage,\n      showAddChildModal,\n      showAddWordModal,\n      childForm,\n      newWord,\n      editingChild,\n      getWordLevel,\n      isWordDone,\n      updateWordLevel,\n      updateWordDone,\n      editChild,\n      saveChild,\n      deleteChild,\n      addWord,\n      deleteWord // ✅ مهم لتصدير الدالة\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","getDatabase","dbRef","onValue","set","push","remove","name","setup","db","children","wordData","words","averageDuration","showAddChildModal","showAddWordModal","childForm","age","gender","iq","speechEvaluation","newWord","editingChild","editingChildId","loadData","childrenRef","snapshot","data","val","value","Object","entries","map","id","child","wordsRef","allWords","Set","values","forEach","childWords","keys","word","add","Array","from","completionPercentage","length","totalWords","completedWords","isWordDone","Math","round","getWordLevel","childId","level","done","updateWordLevel","wordRef","updateWordDone","editChild","saveChild","trim","alert","childRef","deleteChild","confirm","addWord","deleteWord","wordToDelete","filter"],"sources":["C:\\Users\\فاطمة الزهراني\\Downloads\\research-task-manager-updated\\task-manager\\src\\views\\Data.vue"],"sourcesContent":["<template>\n  <div class=\"fade-in\">\n    <div class=\"flex justify-between items-center mb-6\">\n      <h1 class=\"text-2xl font-bold text-gray-800\">البيانات</h1>\n      <div class=\"flex space-x-2 space-x-reverse\">\n        <button @click=\"showAddChildModal = true\" class=\"btn btn-primary ml-2\">\n          <i class=\"fas fa-user-plus ml-2\"></i>إضافة طفل\n        </button>\n        <button @click=\"showAddWordModal = true\" class=\"btn btn-secondary\">\n          <i class=\"fas fa-plus ml-2\"></i>إضافة كلمة\n        </button>\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n      <div class=\"dashboard-card\">\n        <h3 class=\"text-lg font-semibold text-gray-700 mb-2\">إجمالي الأطفال</h3>\n        <p class=\"dashboard-stat\">{{ children.length }}</p>\n        <p class=\"text-sm text-gray-500 mt-2\">\n          عدد الأطفال المشاركين في الدراسة\n        </p>\n      </div>\n\n      <div class=\"dashboard-card\">\n        <h3 class=\"text-lg font-semibold text-gray-700 mb-2\">إجمالي الكلمات</h3>\n        <p class=\"dashboard-stat\">{{ words.length }}</p>\n        <p class=\"text-sm text-gray-500 mt-2\">\n          عدد الكلمات المستخدمة في الدراسة\n        </p>\n      </div>\n\n      <div class=\"dashboard-card\">\n        <h3 class=\"text-lg font-semibold text-gray-700 mb-2\">نسبة الإنجاز</h3>\n        <p class=\"dashboard-stat\">{{ completionPercentage }}%</p>\n        <p class=\"text-sm text-gray-500 mt-2\">نسبة اكتمال تسجيلات الكلمات</p>\n      </div>\n    </div>\n\n    <div class=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n      <h2 class=\"text-xl font-bold text-gray-800 mb-4\">بيانات الأطفال</h2>\n\n      <div class=\"responsive-table\">\n        <table class=\"min-w-full divide-y divide-gray-200\">\n          <thead>\n            <tr>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                الاسم\n              </th>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                العمر\n              </th>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                النوع\n              </th>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                IQ\n              </th>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                تقييم النطق\n              </th>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                إجراءات\n              </th>\n            </tr>\n          </thead>\n          <tbody class=\"bg-white divide-y divide-gray-200\">\n            <tr v-for=\"child in children\" :key=\"child.id\">\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <div class=\"font-medium text-gray-900\">{{ child.name }}</div>\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                {{ child.age }}\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                {{ child.gender }}\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                {{ child.iq }}\n              </td>\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                {{ child.speechEvaluation }}\n              </td>\n              <td\n                class=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\"\n              >\n                <button\n                  @click=\"editChild(child)\"\n                  class=\"text-primary-600 hover:text-primary-900 ml-3\"\n                >\n                  <i class=\"fas fa-edit\"></i>\n                </button>\n                <button\n                  @click=\"deleteChild(child)\"\n                  class=\"text-red-600 hover:text-red-900\"\n                >\n                  <i class=\"fas fa-trash-alt\"></i>\n                </button>\n              </td>\n            </tr>\n            <tr v-if=\"children.length === 0\">\n              <td colspan=\"6\" class=\"px-6 py-4 text-center text-gray-500\">\n                لا توجد بيانات متاحة\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <div class=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n      <h2 class=\"text-xl font-bold text-gray-800 mb-4\">بيانات الكلمات</h2>\n\n      <div class=\"responsive-table\">\n        <table class=\"min-w-full divide-y divide-gray-200\">\n          <thead>\n            <tr>\n              <th\n                class=\"px-6 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                اسم الطفل\n              </th>\n              <th\n                v-for=\"word in words\"\n                :key=\"word\"\n                class=\"px-6 py-3 bg-gray-50 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\"\n              >\n                <div class=\"flex items-center justify-center gap-2\">\n                  <span>{{ word }}</span>\n                  <button\n                    @click=\"deleteWord(word)\"\n                    class=\"text-red-600 hover:text-red-800 text-sm\"\n                    title=\"حذف الكلمة\"\n                  >\n                    <i class=\"fas fa-trash-alt\"></i>\n                  </button>\n                </div>\n              </th>\n            </tr>\n          </thead>\n          <tbody class=\"bg-white divide-y divide-gray-200\">\n            <tr v-for=\"child in children\" :key=\"child.id\">\n              <td class=\"px-6 py-4 whitespace-nowrap\">\n                <div class=\"font-medium text-gray-900\">{{ child.name }}</div>\n              </td>\n              <td\n                v-for=\"word in words\"\n                :key=\"`${child.id}-${word}`\"\n                class=\"px-6 py-4 whitespace-nowrap text-center\"\n              >\n                <div class=\"flex flex-col items-center\">\n                  <select\n                    :value=\"getWordLevel(child.id, word)\"\n                    @change=\"\n                      updateWordLevel(child.id, word, $event.target.value)\n                    \"\n                    class=\"form-input py-1 text-sm mb-1 w-24\"\n                  >\n                    <option value=\"ضعيف\">ضعيف</option>\n                    <option value=\"متوسط\">متوسط</option>\n                    <option value=\"ممتاز\">ممتاز</option>\n                  </select>\n                  <label class=\"flex items-center text-sm text-gray-600\">\n                    <input\n                      type=\"checkbox\"\n                      :checked=\"isWordDone(child.id, word)\"\n                      @change=\"\n                        updateWordDone(child.id, word, $event.target.checked)\n                      \"\n                      class=\"form-checkbox h-4 w-4 text-primary-600 ml-1\"\n                    />\n                    تمت\n                  </label>\n                </div>\n              </td>\n            </tr>\n            <tr v-if=\"children.length === 0\">\n              <td\n                :colspan=\"words.length + 1\"\n                class=\"px-6 py-4 text-center text-gray-500\"\n              >\n                لا توجد بيانات متاحة\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    <div class=\"bg-white rounded-lg shadow-md p-4 mb-6\">\n      <h2 class=\"text-xl font-bold text-gray-800 mb-4\">\n        معلومات عامة عن قاعدة البيانات\n      </h2>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">الصيغة</h3>\n          <p>WAV</p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">معدل العينة</h3>\n          <p>16 kHz</p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">المدة</h3>\n          <p>{{ averageDuration }} ثانية (متوسط)</p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">مكان التسجيل</h3>\n          <p>مراكز لذوي الاحتياجات الخاصة</p>\n        </div>\n      </div>\n\n      <div class=\"mt-4\">\n        <a\n          href=\"https://drive.google.com/drive/folders/1qim-5bbhoKnEE9NQ7e1LDVkXIOon0J1J?usp=sharing\"\n          target=\"_blank\"\n          class=\"btn btn-primary\"\n        >\n          <i class=\"fab fa-google-drive ml-2\"></i>عرض الملفات على Google Drive\n        </a>\n      </div>\n    </div>\n\n    <!-- Add Child Modal -->\n    <div\n      v-if=\"showAddChildModal\"\n      class=\"modal-overlay\"\n      @click.self=\"showAddChildModal = false\"\n    >\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">\n            {{ editingChild ? \"تعديل بيانات طفل\" : \"إضافة طفل جديد\" }}\n          </h2>\n          <button\n            @click=\"showAddChildModal = false\"\n            class=\"text-gray-500 hover:text-gray-700\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        <div class=\"mb-4\">\n          <label class=\"form-label\">الاسم</label>\n          <input\n            type=\"text\"\n            v-model=\"childForm.name\"\n            class=\"form-input\"\n            required\n          />\n        </div>\n\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          <div>\n            <label class=\"form-label\">العمر</label>\n            <input\n              type=\"number\"\n              v-model=\"childForm.age\"\n              class=\"form-input\"\n              required\n            />\n          </div>\n\n          <div>\n            <label class=\"form-label\">النوع</label>\n            <select v-model=\"childForm.gender\" class=\"form-input\" required>\n              <option value=\"ذكر\">ذكر</option>\n              <option value=\"أنثى\">أنثى</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n          <div>\n            <label class=\"form-label\">IQ</label>\n            <input\n              type=\"number\"\n              v-model=\"childForm.iq\"\n              class=\"form-input\"\n              required\n            />\n          </div>\n\n          <div>\n            <label class=\"form-label\">تقييم النطق</label>\n            <select\n              v-model=\"childForm.speechEvaluation\"\n              class=\"form-input\"\n              required\n            >\n              <option value=\"ضعيف\">ضعيف</option>\n              <option value=\"متوسط\">متوسط</option>\n              <option value=\"جيد\">جيد</option>\n              <option value=\"ممتاز\">ممتاز</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"showAddChildModal = false\"\n            class=\"btn btn-outline ml-2\"\n          >\n            إلغاء\n          </button>\n          <button @click=\"saveChild\" class=\"btn btn-primary\">\n            {{ editingChild ? \"حفظ التعديلات\" : \"إضافة الطفل\" }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Add Word Modal -->\n    <div\n      v-if=\"showAddWordModal\"\n      class=\"modal-overlay\"\n      @click.self=\"showAddWordModal = false\"\n    >\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">إضافة كلمة جديدة</h2>\n          <button\n            @click=\"showAddWordModal = false\"\n            class=\"text-gray-500 hover:text-gray-700\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        <div class=\"mb-4\">\n          <label class=\"form-label\">الكلمة</label>\n          <input type=\"text\" v-model=\"newWord\" class=\"form-input\" required />\n        </div>\n\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"showAddWordModal = false\"\n            class=\"btn btn-outline ml-2\"\n          >\n            إلغاء\n          </button>\n          <button @click=\"addWord\" class=\"btn btn-primary\">إضافة الكلمة</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { ref, computed, onMounted } from \"vue\";\nimport {\n  getDatabase,\n  ref as dbRef,\n  onValue,\n  set,\n  push,\n  remove,\n} from \"firebase/database\";\n\nexport default {\n  name: \"Data\",\n  setup() {\n    const db = getDatabase();\n\n    const children = ref([]);\n    const wordData = ref({});\n    const words = ref([]);\n    const averageDuration = ref(3.5);\n\n    const showAddChildModal = ref(false);\n    const showAddWordModal = ref(false);\n\n    const childForm = ref({\n      name: \"\",\n      age: \"\",\n      gender: \"ذكر\",\n      iq: \"\",\n      speechEvaluation: \"متوسط\",\n    });\n    const newWord = ref(\"\");\n    const editingChild = ref(false);\n    const editingChildId = ref(null);\n\n    const loadData = () => {\n      const childrenRef = dbRef(db, \"children\");\n      onValue(childrenRef, (snapshot) => {\n        const data = snapshot.val();\n        children.value = data\n          ? Object.entries(data).map(([id, child]) => ({ id, ...child }))\n          : [];\n      });\n\n      const wordsRef = dbRef(db, \"words\");\n      onValue(wordsRef, (snapshot) => {\n        const data = snapshot.val();\n        if (data) {\n          wordData.value = data;\n          const allWords = new Set();\n          Object.values(data).forEach((childWords) => {\n            Object.keys(childWords).forEach((word) => {\n              allWords.add(word);\n            });\n          });\n          words.value = Array.from(allWords);\n        } else {\n          wordData.value = {};\n          words.value = [];\n        }\n      });\n    };\n\n    const completionPercentage = computed(() => {\n      if (children.value.length === 0 || words.value.length === 0) return 0;\n      let totalWords = children.value.length * words.value.length;\n      let completedWords = 0;\n\n      children.value.forEach((child) => {\n        words.value.forEach((word) => {\n          if (isWordDone(child.id, word)) completedWords++;\n        });\n      });\n\n      return Math.round((completedWords / totalWords) * 100);\n    });\n\n    const getWordLevel = (childId, word) => {\n      return wordData.value[childId]?.[word]?.level || \"ضعيف\";\n    };\n\n    const isWordDone = (childId, word) => {\n      return wordData.value[childId]?.[word]?.done || false;\n    };\n\n    const updateWordLevel = (childId, word, level) => {\n      const wordRef = dbRef(db, `words/${childId}/${word}`);\n      set(wordRef, {\n        level: level,\n        done: isWordDone(childId, word),\n      });\n    };\n\n    const updateWordDone = (childId, word, done) => {\n      const wordRef = dbRef(db, `words/${childId}/${word}`);\n      set(wordRef, {\n        level: getWordLevel(childId, word),\n        done: done,\n      });\n    };\n\n    const editChild = (child) => {\n      childForm.value = {\n        name: child.name,\n        age: child.age,\n        gender: child.gender,\n        iq: child.iq,\n        speechEvaluation: child.speechEvaluation,\n      };\n      editingChild.value = true;\n      editingChildId.value = child.id;\n      showAddChildModal.value = true;\n    };\n\n    const saveChild = () => {\n      if (!childForm.value.name.trim()) {\n        alert(\"يرجى إدخال اسم الطفل\");\n        return;\n      }\n\n      if (editingChild.value) {\n        const childRef = dbRef(db, `children/${editingChildId.value}`);\n        set(childRef, childForm.value);\n      } else {\n        const childRef = dbRef(db, `children/${childForm.value.name}`);\n        set(childRef, childForm.value);\n        words.value.forEach((word) => {\n          const wordRef = dbRef(db, `words/${childForm.value.name}/${word}`);\n          set(wordRef, { level: \"ضعيف\", done: false });\n        });\n      }\n\n      childForm.value = {\n        name: \"\",\n        age: \"\",\n        gender: \"ذكر\",\n        iq: \"\",\n        speechEvaluation: \"متوسط\",\n      };\n      editingChild.value = false;\n      editingChildId.value = null;\n      showAddChildModal.value = false;\n    };\n\n    const deleteChild = (child) => {\n      if (confirm(`هل أنت متأكد من حذف بيانات الطفل \"${child.name}\"؟`)) {\n        const childRef = dbRef(db, `children/${child.id}`);\n        remove(childRef);\n        const wordRef = dbRef(db, `words/${child.id}`);\n        remove(wordRef);\n      }\n    };\n\n    const addWord = () => {\n      if (!newWord.value.trim()) {\n        alert(\"يرجى إدخال الكلمة\");\n        return;\n      }\n\n      children.value.forEach((child) => {\n        const wordRef = dbRef(db, `words/${child.id}/${newWord.value}`);\n        set(wordRef, { level: \"ضعيف\", done: false });\n      });\n\n      newWord.value = \"\";\n      showAddWordModal.value = false;\n    };\n\n    // ✅ دالة حذف الكلمة\n    const deleteWord = (wordToDelete) => {\n      if (\n        confirm(`هل أنت متأكد من حذف الكلمة \"${wordToDelete}\" من جميع الأطفال؟`)\n      ) {\n        children.value.forEach((child) => {\n          const wordRef = dbRef(db, `words/${child.id}/${wordToDelete}`);\n          remove(wordRef);\n        });\n        words.value = words.value.filter((word) => word !== wordToDelete);\n      }\n    };\n\n    onMounted(() => {\n      loadData();\n    });\n\n    return {\n      children,\n      words,\n      wordData,\n      averageDuration,\n      completionPercentage,\n      showAddChildModal,\n      showAddWordModal,\n      childForm,\n      newWord,\n      editingChild,\n      getWordLevel,\n      isWordDone,\n      updateWordLevel,\n      updateWordDone,\n      editChild,\n      saveChild,\n      deleteChild,\n      addWord,\n      deleteWord, // ✅ مهم لتصدير الدالة\n    };\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}