{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, onMounted } from 'vue';\nimport { getDatabase, ref as dbRef, onValue, push, remove } from 'firebase/database';\nimport { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL, deleteObject } from 'firebase/storage';\nexport default {\n  name: 'Letters',\n  setup() {\n    const db = getDatabase();\n    const storage = getStorage();\n\n    // Letters data\n    const doctorLetters = ref([]);\n    const parentLetters = ref([]);\n\n    // Modals\n    const showAddDoctorLetterModal = ref(false);\n    const showAddParentLetterModal = ref(false);\n\n    // Upload state\n    const selectedDoctorFile = ref(null);\n    const selectedParentFile = ref(null);\n    const isUploading = ref(false);\n\n    // Load letters from Firebase\n    const loadLetters = () => {\n      // Load doctor letters\n      const doctorLettersRef = dbRef(db, 'doctor_letters');\n      onValue(doctorLettersRef, snapshot => {\n        const data = snapshot.val();\n        if (data) {\n          doctorLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }));\n        } else {\n          doctorLetters.value = [];\n        }\n      });\n\n      // Load parent letters\n      const parentLettersRef = dbRef(db, 'parent_letters');\n      onValue(parentLettersRef, snapshot => {\n        const data = snapshot.val();\n        if (data) {\n          parentLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }));\n        } else {\n          parentLetters.value = [];\n        }\n      });\n    };\n\n    // Computed properties\n    const doctorCompletionPercentage = computed(() => {\n      // Assuming we need 5 doctor approvals\n      const targetCount = 5;\n      return Math.min(Math.round(doctorLetters.value.length / targetCount * 100), 100);\n    });\n    const parentCompletionPercentage = computed(() => {\n      // Assuming we need 10 parent approvals\n      const targetCount = 10;\n      return Math.min(Math.round(parentLetters.value.length / targetCount * 100), 100);\n    });\n\n    // File upload handlers\n    const handleDoctorFileUpload = event => {\n      selectedDoctorFile.value = event.target.files[0];\n    };\n    const handleParentFileUpload = event => {\n      selectedParentFile.value = event.target.files[0];\n    };\n\n    // Upload doctor letter\n    const uploadDoctorLetter = () => {\n      if (!selectedDoctorFile.value) {\n        alert('يرجى اختيار ملف');\n        return;\n      }\n      isUploading.value = true;\n      const fileName = selectedDoctorFile.value.name;\n      const storagePath = `doctor_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(fileRef, selectedDoctorFile.value);\n      uploadTask.on('state_changed', snapshot => {\n        // Progress monitoring if needed\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log('Upload is ' + progress + '% done');\n      }, error => {\n        // Error handling\n        console.error('Error uploading file:', error);\n        isUploading.value = false;\n        alert('حدث خطأ أثناء رفع الملف');\n      }, () => {\n        // Upload completed successfully\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          // Save letter data to Firebase Database\n          const lettersRef = dbRef(db, 'doctor_letters');\n          push(lettersRef, {\n            name: fileName,\n            url: downloadURL,\n            storagePath: storagePath,\n            timestamp: Date.now()\n          });\n          selectedDoctorFile.value = null;\n          isUploading.value = false;\n          showAddDoctorLetterModal.value = false;\n        });\n      });\n    };\n\n    // Upload parent letter\n    const uploadParentLetter = () => {\n      if (!selectedParentFile.value) {\n        alert('يرجى اختيار ملف');\n        return;\n      }\n      isUploading.value = true;\n      const fileName = selectedParentFile.value.name;\n      const storagePath = `parent_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(fileRef, selectedParentFile.value);\n      uploadTask.on('state_changed', snapshot => {\n        // Progress monitoring if needed\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log('Upload is ' + progress + '% done');\n      }, error => {\n        // Error handling\n        console.error('Error uploading file:', error);\n        isUploading.value = false;\n        alert('حدث خطأ أثناء رفع الملف');\n      }, () => {\n        // Upload completed successfully\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          // Save letter data to Firebase Database\n          const lettersRef = dbRef(db, 'parent_letters');\n          push(lettersRef, {\n            name: fileName,\n            url: downloadURL,\n            storagePath: storagePath,\n            timestamp: Date.now()\n          });\n          selectedParentFile.value = null;\n          isUploading.value = false;\n          showAddParentLetterModal.value = false;\n        });\n      });\n    };\n\n    // Delete letter\n    const deleteLetter = (type, letter) => {\n      if (!confirm('هل أنت متأكد من حذف هذا الملف؟')) return;\n\n      // Delete file from storage\n      const fileRef = storageRef(storage, letter.storagePath);\n      deleteObject(fileRef).catch(error => {\n        console.error('Error deleting file:', error);\n      });\n\n      // Delete data from database\n      const letterRef = dbRef(db, `${type}_letters/${letter.id}`);\n      remove(letterRef);\n    };\n\n    // Download templates\n    const downloadDoctorTemplate = () => {\n      // In a real app, this would download a template file\n      alert('سيتم تنزيل نموذج موافقة الدكاترة (هذه وظيفة تجريبية)');\n    };\n    const downloadParentTemplate = () => {\n      // In a real app, this would download a template file\n      alert('سيتم تنزيل نموذج موافقة أولياء الأمور (هذه وظيفة تجريبية)');\n    };\n\n    // Helper functions\n    const formatDate = timestamp => {\n      if (!timestamp) return '';\n      const date = new Date(timestamp);\n      return date.toLocaleDateString('ar-EG');\n    };\n\n    // Initialize\n    onMounted(() => {\n      loadLetters();\n    });\n    return {\n      doctorLetters,\n      parentLetters,\n      showAddDoctorLetterModal,\n      showAddParentLetterModal,\n      isUploading,\n      doctorCompletionPercentage,\n      parentCompletionPercentage,\n      handleDoctorFileUpload,\n      handleParentFileUpload,\n      uploadDoctorLetter,\n      uploadParentLetter,\n      deleteLetter,\n      downloadDoctorTemplate,\n      downloadParentTemplate,\n      formatDate\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","getDatabase","dbRef","onValue","push","remove","getStorage","storageRef","uploadBytesResumable","getDownloadURL","deleteObject","name","setup","db","storage","doctorLetters","parentLetters","showAddDoctorLetterModal","showAddParentLetterModal","selectedDoctorFile","selectedParentFile","isUploading","loadLetters","doctorLettersRef","snapshot","data","val","value","Object","entries","map","id","letter","parentLettersRef","doctorCompletionPercentage","targetCount","Math","min","round","length","parentCompletionPercentage","handleDoctorFileUpload","event","target","files","handleParentFileUpload","uploadDoctorLetter","alert","fileName","storagePath","fileRef","uploadTask","on","progress","bytesTransferred","totalBytes","console","log","error","then","downloadURL","lettersRef","url","timestamp","Date","now","uploadParentLetter","deleteLetter","type","confirm","catch","letterRef","downloadDoctorTemplate","downloadParentTemplate","formatDate","date","toLocaleDateString"],"sources":["C:\\Users\\فاطمة الزهراني\\Downloads\\research-task-manager-updated\\task-manager\\src\\views\\Letters.vue"],"sourcesContent":["<template>\n  <div class=\"fade-in\">\n    <div class=\"flex justify-between items-center mb-6\">\n      <h1 class=\"text-2xl font-bold text-gray-800\">الخطابات والموافقات</h1>\n      <div class=\"flex space-x-2 space-x-reverse\">\n        <button @click=\"showAddDoctorLetterModal = true\" class=\"btn btn-primary ml-2\">\n          <i class=\"fas fa-plus ml-2\"></i>إضافة موافقة دكتور\n        </button>\n        <button @click=\"showAddParentLetterModal = true\" class=\"btn btn-secondary\">\n          <i class=\"fas fa-plus ml-2\"></i>إضافة موافقة ولي أمر\n        </button>\n      </div>\n    </div>\n    \n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n      <div class=\"bg-white rounded-lg shadow-md p-6\">\n        <h2 class=\"text-xl font-bold text-gray-800 mb-4\">موافقات الدكاترة</h2>\n        \n        <div v-if=\"doctorLetters.length === 0\" class=\"text-center py-8 text-gray-500\">\n          لا توجد موافقات دكاترة حتى الآن\n        </div>\n        \n        <div v-else class=\"space-y-4\">\n          <div v-for=\"letter in doctorLetters\" :key=\"letter.id\" class=\"bg-gray-50 rounded-lg p-4 flex justify-between items-center\">\n            <div>\n              <h3 class=\"font-medium text-gray-800\">{{ letter.name }}</h3>\n              <p class=\"text-sm text-gray-500\">{{ formatDate(letter.timestamp) }}</p>\n            </div>\n            \n            <div class=\"flex items-center\">\n              <a :href=\"letter.url\" target=\"_blank\" class=\"text-primary-600 hover:text-primary-800 ml-4\">\n                <i class=\"fas fa-external-link-alt ml-1\"></i>عرض\n              </a>\n              <button @click=\"deleteLetter('doctor', letter)\" class=\"text-red-600 hover:text-red-800\">\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"mt-6\">\n          <h3 class=\"text-lg font-semibold text-gray-700 mb-2\">نموذج موافقة الدكاترة</h3>\n          <p class=\"text-sm text-gray-600 mb-3\">\n            يمكنك تنزيل نموذج موافقة الدكاترة وطباعته للحصول على موافقات جديدة.\n          </p>\n          <a href=\"#\" @click.prevent=\"downloadDoctorTemplate\" class=\"btn btn-outline\">\n            <i class=\"fas fa-download ml-2\"></i>تنزيل النموذج\n          </a>\n        </div>\n      </div>\n      \n      <div class=\"bg-white rounded-lg shadow-md p-6\">\n        <h2 class=\"text-xl font-bold text-gray-800 mb-4\">موافقات أولياء الأمور</h2>\n        \n        <div v-if=\"parentLetters.length === 0\" class=\"text-center py-8 text-gray-500\">\n          لا توجد موافقات أولياء أمور حتى الآن\n        </div>\n        \n        <div v-else class=\"space-y-4\">\n          <div v-for=\"letter in parentLetters\" :key=\"letter.id\" class=\"bg-gray-50 rounded-lg p-4 flex justify-between items-center\">\n            <div>\n              <h3 class=\"font-medium text-gray-800\">{{ letter.name }}</h3>\n              <p class=\"text-sm text-gray-500\">{{ formatDate(letter.timestamp) }}</p>\n            </div>\n            \n            <div class=\"flex items-center\">\n              <a :href=\"letter.url\" target=\"_blank\" class=\"text-primary-600 hover:text-primary-800 ml-4\">\n                <i class=\"fas fa-external-link-alt ml-1\"></i>عرض\n              </a>\n              <button @click=\"deleteLetter('parent', letter)\" class=\"text-red-600 hover:text-red-800\">\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"mt-6\">\n          <h3 class=\"text-lg font-semibold text-gray-700 mb-2\">نموذج موافقة أولياء الأمور</h3>\n          <p class=\"text-sm text-gray-600 mb-3\">\n            يمكنك تنزيل نموذج موافقة أولياء الأمور وطباعته للحصول على موافقات جديدة.\n          </p>\n          <a href=\"#\" @click.prevent=\"downloadParentTemplate\" class=\"btn btn-outline\">\n            <i class=\"fas fa-download ml-2\"></i>تنزيل النموذج\n          </a>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"bg-white rounded-lg shadow-md p-6 mt-6\">\n      <h2 class=\"text-xl font-bold text-gray-800 mb-4\">حالة الموافقات</h2>\n      \n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">إجمالي موافقات الدكاترة</h3>\n          <p class=\"text-2xl font-bold text-primary-600\">{{ doctorLetters.length }}</p>\n        </div>\n        \n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">إجمالي موافقات أولياء الأمور</h3>\n          <p class=\"text-2xl font-bold text-primary-600\">{{ parentLetters.length }}</p>\n        </div>\n        \n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">نسبة اكتمال موافقات الدكاترة</h3>\n          <p class=\"text-2xl font-bold text-primary-600\">{{ doctorCompletionPercentage }}%</p>\n        </div>\n        \n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">نسبة اكتمال موافقات أولياء الأمور</h3>\n          <p class=\"text-2xl font-bold text-primary-600\">{{ parentCompletionPercentage }}%</p>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Add Doctor Letter Modal -->\n    <div v-if=\"showAddDoctorLetterModal\" class=\"modal-overlay\" @click.self=\"showAddDoctorLetterModal = false\">\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">إضافة موافقة دكتور</h2>\n          <button @click=\"showAddDoctorLetterModal = false\" class=\"text-gray-500 hover:text-gray-700\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        \n        <div class=\"mb-4\">\n          <label class=\"form-label\">ملف الموافقة (PDF)</label>\n          <input type=\"file\" accept=\"application/pdf\" @change=\"handleDoctorFileUpload\" class=\"form-input\" required>\n        </div>\n        \n        <div class=\"flex justify-end\">\n          <button @click=\"showAddDoctorLetterModal = false\" class=\"btn btn-outline ml-2\">إلغاء</button>\n          <button @click=\"uploadDoctorLetter\" class=\"btn btn-primary\" :disabled=\"isUploading\">\n            <i v-if=\"isUploading\" class=\"fas fa-spinner fa-spin ml-1\"></i>\n            رفع الملف\n          </button>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Add Parent Letter Modal -->\n    <div v-if=\"showAddParentLetterModal\" class=\"modal-overlay\" @click.self=\"showAddParentLetterModal = false\">\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">إضافة موافقة ولي أمر</h2>\n          <button @click=\"showAddParentLetterModal = false\" class=\"text-gray-500 hover:text-gray-700\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        \n        <div class=\"mb-4\">\n          <label class=\"form-label\">ملف الموافقة (PDF)</label>\n          <input type=\"file\" accept=\"application/pdf\" @change=\"handleParentFileUpload\" class=\"form-input\" required>\n        </div>\n        \n        <div class=\"flex justify-end\">\n          <button @click=\"showAddParentLetterModal = false\" class=\"btn btn-outline ml-2\">إلغاء</button>\n          <button @click=\"uploadParentLetter\" class=\"btn btn-primary\" :disabled=\"isUploading\">\n            <i v-if=\"isUploading\" class=\"fas fa-spinner fa-spin ml-1\"></i>\n            رفع الملف\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { getDatabase, ref as dbRef, onValue, push, remove } from 'firebase/database'\nimport { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL, deleteObject } from 'firebase/storage'\n\nexport default {\n  name: 'Letters',\n  setup() {\n    const db = getDatabase()\n    const storage = getStorage()\n    \n    // Letters data\n    const doctorLetters = ref([])\n    const parentLetters = ref([])\n    \n    // Modals\n    const showAddDoctorLetterModal = ref(false)\n    const showAddParentLetterModal = ref(false)\n    \n    // Upload state\n    const selectedDoctorFile = ref(null)\n    const selectedParentFile = ref(null)\n    const isUploading = ref(false)\n    \n    // Load letters from Firebase\n    const loadLetters = () => {\n      // Load doctor letters\n      const doctorLettersRef = dbRef(db, 'doctor_letters')\n      onValue(doctorLettersRef, (snapshot) => {\n        const data = snapshot.val()\n        if (data) {\n          doctorLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }))\n        } else {\n          doctorLetters.value = []\n        }\n      })\n      \n      // Load parent letters\n      const parentLettersRef = dbRef(db, 'parent_letters')\n      onValue(parentLettersRef, (snapshot) => {\n        const data = snapshot.val()\n        if (data) {\n          parentLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }))\n        } else {\n          parentLetters.value = []\n        }\n      })\n    }\n    \n    // Computed properties\n    const doctorCompletionPercentage = computed(() => {\n      // Assuming we need 5 doctor approvals\n      const targetCount = 5\n      return Math.min(Math.round((doctorLetters.value.length / targetCount) * 100), 100)\n    })\n    \n    const parentCompletionPercentage = computed(() => {\n      // Assuming we need 10 parent approvals\n      const targetCount = 10\n      return Math.min(Math.round((parentLetters.value.length / targetCount) * 100), 100)\n    })\n    \n    // File upload handlers\n    const handleDoctorFileUpload = (event) => {\n      selectedDoctorFile.value = event.target.files[0]\n    }\n    \n    const handleParentFileUpload = (event) => {\n      selectedParentFile.value = event.target.files[0]\n    }\n    \n    // Upload doctor letter\n    const uploadDoctorLetter = () => {\n      if (!selectedDoctorFile.value) {\n        alert('يرجى اختيار ملف')\n        return\n      }\n      \n      isUploading.value = true\n      const fileName = selectedDoctorFile.value.name\n      const storagePath = `doctor_letters/${fileName}`\n      \n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath)\n      const uploadTask = uploadBytesResumable(fileRef, selectedDoctorFile.value)\n      \n      uploadTask.on('state_changed', \n        (snapshot) => {\n          // Progress monitoring if needed\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          console.log('Upload is ' + progress + '% done')\n        }, \n        (error) => {\n          // Error handling\n          console.error('Error uploading file:', error)\n          isUploading.value = false\n          alert('حدث خطأ أثناء رفع الملف')\n        }, \n        () => {\n          // Upload completed successfully\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            // Save letter data to Firebase Database\n            const lettersRef = dbRef(db, 'doctor_letters')\n            push(lettersRef, {\n              name: fileName,\n              url: downloadURL,\n              storagePath: storagePath,\n              timestamp: Date.now()\n            })\n            \n            selectedDoctorFile.value = null\n            isUploading.value = false\n            showAddDoctorLetterModal.value = false\n          })\n        }\n      )\n    }\n    \n    // Upload parent letter\n    const uploadParentLetter = () => {\n      if (!selectedParentFile.value) {\n        alert('يرجى اختيار ملف')\n        return\n      }\n      \n      isUploading.value = true\n      const fileName = selectedParentFile.value.name\n      const storagePath = `parent_letters/${fileName}`\n      \n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath)\n      const uploadTask = uploadBytesResumable(fileRef, selectedParentFile.value)\n      \n      uploadTask.on('state_changed', \n        (snapshot) => {\n          // Progress monitoring if needed\n          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          console.log('Upload is ' + progress + '% done')\n        }, \n        (error) => {\n          // Error handling\n          console.error('Error uploading file:', error)\n          isUploading.value = false\n          alert('حدث خطأ أثناء رفع الملف')\n        }, \n        () => {\n          // Upload completed successfully\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            // Save letter data to Firebase Database\n            const lettersRef = dbRef(db, 'parent_letters')\n            push(lettersRef, {\n              name: fileName,\n              url: downloadURL,\n              storagePath: storagePath,\n              timestamp: Date.now()\n            })\n            \n            selectedParentFile.value = null\n            isUploading.value = false\n            showAddParentLetterModal.value = false\n          })\n        }\n      )\n    }\n    \n    // Delete letter\n    const deleteLetter = (type, letter) => {\n      if (!confirm('هل أنت متأكد من حذف هذا الملف؟')) return\n      \n      // Delete file from storage\n      const fileRef = storageRef(storage, letter.storagePath)\n      deleteObject(fileRef).catch(error => {\n        console.error('Error deleting file:', error)\n      })\n      \n      // Delete data from database\n      const letterRef = dbRef(db, `${type}_letters/${letter.id}`)\n      remove(letterRef)\n    }\n    \n    // Download templates\n    const downloadDoctorTemplate = () => {\n      // In a real app, this would download a template file\n      alert('سيتم تنزيل نموذج موافقة الدكاترة (هذه وظيفة تجريبية)')\n    }\n    \n    const downloadParentTemplate = () => {\n      // In a real app, this would download a template file\n      alert('سيتم تنزيل نموذج موافقة أولياء الأمور (هذه وظيفة تجريبية)')\n    }\n    \n    // Helper functions\n    const formatDate = (timestamp) => {\n      if (!timestamp) return ''\n      const date = new Date(timestamp)\n      return date.toLocaleDateString('ar-EG')\n    }\n    \n    // Initialize\n    onMounted(() => {\n      loadLetters()\n    })\n    \n    return {\n      doctorLetters,\n      parentLetters,\n      showAddDoctorLetterModal,\n      showAddParentLetterModal,\n      isUploading,\n      doctorCompletionPercentage,\n      parentCompletionPercentage,\n      handleDoctorFileUpload,\n      handleParentFileUpload,\n      uploadDoctorLetter,\n      uploadParentLetter,\n      deleteLetter,\n      downloadDoctorTemplate,\n      downloadParentTemplate,\n      formatDate\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}