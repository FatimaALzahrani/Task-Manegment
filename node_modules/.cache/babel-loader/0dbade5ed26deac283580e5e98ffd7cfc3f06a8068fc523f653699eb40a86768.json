{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, computed, onMounted } from \"vue\";\nimport { getDatabase, ref as dbRef, onValue, push, remove } from \"firebase/database\";\nimport { getStorage, ref as storageRef, uploadBytesResumable, getDownloadURL, deleteObject } from \"firebase/storage\";\nexport default {\n  name: \"Letters\",\n  setup() {\n    const db = getDatabase();\n    const storage = getStorage();\n\n    // Letters data\n    const doctorLetters = ref([]);\n    const parentLetters = ref([]);\n\n    // Modals\n    const showAddDoctorLetterModal = ref(false);\n    const showAddParentLetterModal = ref(false);\n\n    // Upload state\n    const selectedDoctorFile = ref(null);\n    const selectedParentFile = ref(null);\n    const isUploading = ref(false);\n\n    // Load letters from Firebase\n    const loadLetters = () => {\n      // Load doctor letters\n      const doctorLettersRef = dbRef(db, \"doctor_letters\");\n      onValue(doctorLettersRef, snapshot => {\n        const data = snapshot.val();\n        if (data) {\n          doctorLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }));\n        } else {\n          doctorLetters.value = [];\n        }\n      });\n\n      // Load parent letters\n      const parentLettersRef = dbRef(db, \"parent_letters\");\n      onValue(parentLettersRef, snapshot => {\n        const data = snapshot.val();\n        if (data) {\n          parentLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter\n          }));\n        } else {\n          parentLetters.value = [];\n        }\n      });\n    };\n\n    // Computed properties\n    const doctorCompletionPercentage = computed(() => {\n      // Assuming we need 5 doctor approvals\n      const targetCount = 5;\n      return Math.min(Math.round(doctorLetters.value.length / targetCount * 100), 100);\n    });\n    const parentCompletionPercentage = computed(() => {\n      // Assuming we need 10 parent approvals\n      const targetCount = 10;\n      return Math.min(Math.round(parentLetters.value.length / targetCount * 100), 100);\n    });\n\n    // File upload handlers\n    const handleDoctorFileUpload = event => {\n      selectedDoctorFile.value = event.target.files[0];\n    };\n    const handleParentFileUpload = event => {\n      selectedParentFile.value = event.target.files[0];\n    };\n\n    // Upload doctor letter\n    const uploadDoctorLetter = () => {\n      if (!selectedDoctorFile.value) {\n        alert(\"يرجى اختيار ملف\");\n        return;\n      }\n      isUploading.value = true;\n      const fileName = selectedDoctorFile.value.name;\n      const storagePath = `doctor_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(fileRef, selectedDoctorFile.value);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // Progress monitoring if needed\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n      }, error => {\n        // Error handling\n        console.error(\"Error uploading file:\", error);\n        isUploading.value = false;\n        alert(\"حدث خطأ أثناء رفع الملف\");\n      }, () => {\n        // Upload completed successfully\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          // Save letter data to Firebase Database\n          const lettersRef = dbRef(db, \"doctor_letters\");\n          push(lettersRef, {\n            name: fileName,\n            url: downloadURL,\n            storagePath: storagePath,\n            timestamp: Date.now()\n          });\n          selectedDoctorFile.value = null;\n          isUploading.value = false;\n          showAddDoctorLetterModal.value = false;\n        });\n      });\n    };\n\n    // Upload parent letter\n    const uploadParentLetter = () => {\n      if (!selectedParentFile.value) {\n        alert(\"يرجى اختيار ملف\");\n        return;\n      }\n      isUploading.value = true;\n      const fileName = selectedParentFile.value.name;\n      const storagePath = `parent_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(fileRef, selectedParentFile.value);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // Progress monitoring if needed\n        const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n        console.log(\"Upload is \" + progress + \"% done\");\n      }, error => {\n        // Error handling\n        console.error(\"Error uploading file:\", error);\n        isUploading.value = false;\n        alert(\"حدث خطأ أثناء رفع الملف\");\n      }, () => {\n        // Upload completed successfully\n        getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n          // Save letter data to Firebase Database\n          const lettersRef = dbRef(db, \"parent_letters\");\n          push(lettersRef, {\n            name: fileName,\n            url: downloadURL,\n            storagePath: storagePath,\n            timestamp: Date.now()\n          });\n          selectedParentFile.value = null;\n          isUploading.value = false;\n          showAddParentLetterModal.value = false;\n        });\n      });\n    };\n\n    // Delete letter\n    const deleteLetter = (type, letter) => {\n      if (!confirm(\"هل أنت متأكد من حذف هذا الملف؟\")) return;\n\n      // Delete file from storage\n      const fileRef = storageRef(storage, letter.storagePath);\n      deleteObject(fileRef).catch(error => {\n        console.error(\"Error deleting file:\", error);\n      });\n\n      // Delete data from database\n      const letterRef = dbRef(db, `${type}_letters/${letter.id}`);\n      remove(letterRef);\n    };\n\n    // Download templates\n    const downloadDoctorTemplate = () => {\n      // In a real app, this would download a template file\n      alert(\"سيتم تنزيل نموذج موافقة الدكاترة (هذه وظيفة تجريبية)\");\n    };\n    const downloadParentTemplate = () => {\n      // In a real app, this would download a template file\n      alert(\"سيتم تنزيل نموذج موافقة أولياء الأمور (هذه وظيفة تجريبية)\");\n    };\n\n    // Helper functions\n    const formatDate = timestamp => {\n      if (!timestamp) return \"\";\n      const date = new Date(timestamp);\n      return date.toLocaleDateString(\"ar-EG\");\n    };\n\n    // Initialize\n    onMounted(() => {\n      loadLetters();\n    });\n    return {\n      doctorLetters,\n      parentLetters,\n      showAddDoctorLetterModal,\n      showAddParentLetterModal,\n      isUploading,\n      doctorCompletionPercentage,\n      parentCompletionPercentage,\n      handleDoctorFileUpload,\n      handleParentFileUpload,\n      uploadDoctorLetter,\n      uploadParentLetter,\n      deleteLetter,\n      downloadDoctorTemplate,\n      downloadParentTemplate,\n      formatDate\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","getDatabase","dbRef","onValue","push","remove","getStorage","storageRef","uploadBytesResumable","getDownloadURL","deleteObject","name","setup","db","storage","doctorLetters","parentLetters","showAddDoctorLetterModal","showAddParentLetterModal","selectedDoctorFile","selectedParentFile","isUploading","loadLetters","doctorLettersRef","snapshot","data","val","value","Object","entries","map","id","letter","parentLettersRef","doctorCompletionPercentage","targetCount","Math","min","round","length","parentCompletionPercentage","handleDoctorFileUpload","event","target","files","handleParentFileUpload","uploadDoctorLetter","alert","fileName","storagePath","fileRef","uploadTask","on","progress","bytesTransferred","totalBytes","console","log","error","then","downloadURL","lettersRef","url","timestamp","Date","now","uploadParentLetter","deleteLetter","type","confirm","catch","letterRef","downloadDoctorTemplate","downloadParentTemplate","formatDate","date","toLocaleDateString"],"sources":["C:\\Users\\فاطمة الزهراني\\Downloads\\research-task-manager-updated\\task-manager\\src\\views\\Letters.vue"],"sourcesContent":["<template>\n  <div class=\"fade-in\">\n    <div class=\"flex justify-between items-center mb-6\">\n      <h1 class=\"text-2xl font-bold text-gray-800\">الخطابات والموافقات</h1>\n      <div class=\"flex space-x-2 space-x-reverse\">\n        <button\n          @click=\"showAddDoctorLetterModal = true\"\n          class=\"btn btn-primary ml-2\"\n        >\n          <i class=\"fas fa-plus ml-2\"></i>إضافة موافقة دكتور\n        </button>\n        <button\n          @click=\"showAddParentLetterModal = true\"\n          class=\"btn btn-secondary\"\n        >\n          <i class=\"fas fa-plus ml-2\"></i>إضافة موافقة ولي أمر\n        </button>\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n      <div class=\"bg-white rounded-lg shadow-md p-6\">\n        <h2 class=\"text-xl font-bold text-gray-800 mb-4\">موافقات الدكاترة</h2>\n\n        <div\n          v-if=\"doctorLetters.length === 0\"\n          class=\"text-center py-8 text-gray-500\"\n        >\n          لا توجد موافقات دكاترة حتى الآن\n        </div>\n\n        <div v-else class=\"space-y-4\">\n          <div\n            v-for=\"letter in doctorLetters\"\n            :key=\"letter.id\"\n            class=\"bg-gray-50 rounded-lg p-4 flex justify-between items-center\"\n          >\n            <div>\n              <h3 class=\"font-medium text-gray-800\">{{ letter.name }}</h3>\n              <p class=\"text-sm text-gray-500\">\n                {{ formatDate(letter.timestamp) }}\n              </p>\n            </div>\n\n            <div class=\"flex items-center\">\n              <a\n                :href=\"letter.url\"\n                target=\"_blank\"\n                class=\"text-primary-600 hover:text-primary-800 ml-4\"\n              >\n                <i class=\"fas fa-external-link-alt ml-1\"></i>عرض\n              </a>\n              <button\n                @click=\"deleteLetter('doctor', letter)\"\n                class=\"text-red-600 hover:text-red-800\"\n              >\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bg-white rounded-lg shadow-md p-6\">\n        <h2 class=\"text-xl font-bold text-gray-800 mb-4\">\n          موافقات أولياء الأمور\n        </h2>\n\n        <div\n          v-if=\"parentLetters.length === 0\"\n          class=\"text-center py-8 text-gray-500\"\n        >\n          لا توجد موافقات أولياء أمور حتى الآن\n        </div>\n\n        <div v-else class=\"space-y-4\">\n          <div\n            v-for=\"letter in parentLetters\"\n            :key=\"letter.id\"\n            class=\"bg-gray-50 rounded-lg p-4 flex justify-between items-center\"\n          >\n            <div>\n              <h3 class=\"font-medium text-gray-800\">{{ letter.name }}</h3>\n              <p class=\"text-sm text-gray-500\">\n                {{ formatDate(letter.timestamp) }}\n              </p>\n            </div>\n\n            <div class=\"flex items-center\">\n              <a\n                :href=\"letter.url\"\n                target=\"_blank\"\n                class=\"text-primary-600 hover:text-primary-800 ml-4\"\n              >\n                <i class=\"fas fa-external-link-alt ml-1\"></i>عرض\n              </a>\n              <button\n                @click=\"deleteLetter('parent', letter)\"\n                class=\"text-red-600 hover:text-red-800\"\n              >\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bg-white rounded-lg shadow-md p-6 mt-6\">\n      <h2 class=\"text-xl font-bold text-gray-800 mb-4\">حالة الموافقات</h2>\n\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">\n            إجمالي موافقات الدكاترة\n          </h3>\n          <p class=\"text-2xl font-bold text-primary-600\">\n            {{ doctorLetters.length }}\n          </p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">\n            إجمالي موافقات أولياء الأمور\n          </h3>\n          <p class=\"text-2xl font-bold text-primary-600\">\n            {{ parentLetters.length }}\n          </p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">\n            نسبة اكتمال موافقات الدكاترة\n          </h3>\n          <p class=\"text-2xl font-bold text-primary-600\">\n            {{ doctorCompletionPercentage }}%\n          </p>\n        </div>\n\n        <div class=\"p-4 bg-gray-50 rounded-lg\">\n          <h3 class=\"font-semibold text-gray-700 mb-2\">\n            نسبة اكتمال موافقات أولياء الأمور\n          </h3>\n          <p class=\"text-2xl font-bold text-primary-600\">\n            {{ parentCompletionPercentage }}%\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- Add Doctor Letter Modal -->\n    <div\n      v-if=\"showAddDoctorLetterModal\"\n      class=\"modal-overlay\"\n      @click.self=\"showAddDoctorLetterModal = false\"\n    >\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">إضافة موافقة دكتور</h2>\n          <button\n            @click=\"showAddDoctorLetterModal = false\"\n            class=\"text-gray-500 hover:text-gray-700\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        <div class=\"mb-4\">\n          <label class=\"form-label\">ملف الموافقة (PDF)</label>\n          <input\n            type=\"file\"\n            accept=\"application/pdf\"\n            @change=\"handleDoctorFileUpload\"\n            class=\"form-input\"\n            required\n          />\n        </div>\n\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"showAddDoctorLetterModal = false\"\n            class=\"btn btn-outline ml-2\"\n          >\n            إلغاء\n          </button>\n          <button\n            @click=\"uploadDoctorLetter\"\n            class=\"btn btn-primary\"\n            :disabled=\"isUploading\"\n          >\n            <i v-if=\"isUploading\" class=\"fas fa-spinner fa-spin ml-1\"></i>\n            رفع الملف\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Add Parent Letter Modal -->\n    <div\n      v-if=\"showAddParentLetterModal\"\n      class=\"modal-overlay\"\n      @click.self=\"showAddParentLetterModal = false\"\n    >\n      <div class=\"modal-content\">\n        <div class=\"flex justify-between items-center mb-4\">\n          <h2 class=\"text-xl font-bold text-gray-800\">إضافة موافقة ولي أمر</h2>\n          <button\n            @click=\"showAddParentLetterModal = false\"\n            class=\"text-gray-500 hover:text-gray-700\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n\n        <div class=\"mb-4\">\n          <label class=\"form-label\">ملف الموافقة (PDF)</label>\n          <input\n            type=\"file\"\n            accept=\"application/pdf\"\n            @change=\"handleParentFileUpload\"\n            class=\"form-input\"\n            required\n          />\n        </div>\n\n        <div class=\"flex justify-end\">\n          <button\n            @click=\"showAddParentLetterModal = false\"\n            class=\"btn btn-outline ml-2\"\n          >\n            إلغاء\n          </button>\n          <button\n            @click=\"uploadParentLetter\"\n            class=\"btn btn-primary\"\n            :disabled=\"isUploading\"\n          >\n            <i v-if=\"isUploading\" class=\"fas fa-spinner fa-spin ml-1\"></i>\n            رفع الملف\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from \"vue\";\nimport {\n  getDatabase,\n  ref as dbRef,\n  onValue,\n  push,\n  remove,\n} from \"firebase/database\";\nimport {\n  getStorage,\n  ref as storageRef,\n  uploadBytesResumable,\n  getDownloadURL,\n  deleteObject,\n} from \"firebase/storage\";\n\nexport default {\n  name: \"Letters\",\n  setup() {\n    const db = getDatabase();\n    const storage = getStorage();\n\n    // Letters data\n    const doctorLetters = ref([]);\n    const parentLetters = ref([]);\n\n    // Modals\n    const showAddDoctorLetterModal = ref(false);\n    const showAddParentLetterModal = ref(false);\n\n    // Upload state\n    const selectedDoctorFile = ref(null);\n    const selectedParentFile = ref(null);\n    const isUploading = ref(false);\n\n    // Load letters from Firebase\n    const loadLetters = () => {\n      // Load doctor letters\n      const doctorLettersRef = dbRef(db, \"doctor_letters\");\n      onValue(doctorLettersRef, (snapshot) => {\n        const data = snapshot.val();\n        if (data) {\n          doctorLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter,\n          }));\n        } else {\n          doctorLetters.value = [];\n        }\n      });\n\n      // Load parent letters\n      const parentLettersRef = dbRef(db, \"parent_letters\");\n      onValue(parentLettersRef, (snapshot) => {\n        const data = snapshot.val();\n        if (data) {\n          parentLetters.value = Object.entries(data).map(([id, letter]) => ({\n            id,\n            ...letter,\n          }));\n        } else {\n          parentLetters.value = [];\n        }\n      });\n    };\n\n    // Computed properties\n    const doctorCompletionPercentage = computed(() => {\n      // Assuming we need 5 doctor approvals\n      const targetCount = 5;\n      return Math.min(\n        Math.round((doctorLetters.value.length / targetCount) * 100),\n        100\n      );\n    });\n\n    const parentCompletionPercentage = computed(() => {\n      // Assuming we need 10 parent approvals\n      const targetCount = 10;\n      return Math.min(\n        Math.round((parentLetters.value.length / targetCount) * 100),\n        100\n      );\n    });\n\n    // File upload handlers\n    const handleDoctorFileUpload = (event) => {\n      selectedDoctorFile.value = event.target.files[0];\n    };\n\n    const handleParentFileUpload = (event) => {\n      selectedParentFile.value = event.target.files[0];\n    };\n\n    // Upload doctor letter\n    const uploadDoctorLetter = () => {\n      if (!selectedDoctorFile.value) {\n        alert(\"يرجى اختيار ملف\");\n        return;\n      }\n\n      isUploading.value = true;\n      const fileName = selectedDoctorFile.value.name;\n      const storagePath = `doctor_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(\n        fileRef,\n        selectedDoctorFile.value\n      );\n\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          // Progress monitoring if needed\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        },\n        (error) => {\n          // Error handling\n          console.error(\"Error uploading file:\", error);\n          isUploading.value = false;\n          alert(\"حدث خطأ أثناء رفع الملف\");\n        },\n        () => {\n          // Upload completed successfully\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            // Save letter data to Firebase Database\n            const lettersRef = dbRef(db, \"doctor_letters\");\n            push(lettersRef, {\n              name: fileName,\n              url: downloadURL,\n              storagePath: storagePath,\n              timestamp: Date.now(),\n            });\n\n            selectedDoctorFile.value = null;\n            isUploading.value = false;\n            showAddDoctorLetterModal.value = false;\n          });\n        }\n      );\n    };\n\n    // Upload parent letter\n    const uploadParentLetter = () => {\n      if (!selectedParentFile.value) {\n        alert(\"يرجى اختيار ملف\");\n        return;\n      }\n\n      isUploading.value = true;\n      const fileName = selectedParentFile.value.name;\n      const storagePath = `parent_letters/${fileName}`;\n\n      // Upload file to Firebase Storage\n      const fileRef = storageRef(storage, storagePath);\n      const uploadTask = uploadBytesResumable(\n        fileRef,\n        selectedParentFile.value\n      );\n\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          // Progress monitoring if needed\n          const progress =\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        },\n        (error) => {\n          // Error handling\n          console.error(\"Error uploading file:\", error);\n          isUploading.value = false;\n          alert(\"حدث خطأ أثناء رفع الملف\");\n        },\n        () => {\n          // Upload completed successfully\n          getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n            // Save letter data to Firebase Database\n            const lettersRef = dbRef(db, \"parent_letters\");\n            push(lettersRef, {\n              name: fileName,\n              url: downloadURL,\n              storagePath: storagePath,\n              timestamp: Date.now(),\n            });\n\n            selectedParentFile.value = null;\n            isUploading.value = false;\n            showAddParentLetterModal.value = false;\n          });\n        }\n      );\n    };\n\n    // Delete letter\n    const deleteLetter = (type, letter) => {\n      if (!confirm(\"هل أنت متأكد من حذف هذا الملف؟\")) return;\n\n      // Delete file from storage\n      const fileRef = storageRef(storage, letter.storagePath);\n      deleteObject(fileRef).catch((error) => {\n        console.error(\"Error deleting file:\", error);\n      });\n\n      // Delete data from database\n      const letterRef = dbRef(db, `${type}_letters/${letter.id}`);\n      remove(letterRef);\n    };\n\n    // Download templates\n    const downloadDoctorTemplate = () => {\n      // In a real app, this would download a template file\n      alert(\"سيتم تنزيل نموذج موافقة الدكاترة (هذه وظيفة تجريبية)\");\n    };\n\n    const downloadParentTemplate = () => {\n      // In a real app, this would download a template file\n      alert(\"سيتم تنزيل نموذج موافقة أولياء الأمور (هذه وظيفة تجريبية)\");\n    };\n\n    // Helper functions\n    const formatDate = (timestamp) => {\n      if (!timestamp) return \"\";\n      const date = new Date(timestamp);\n      return date.toLocaleDateString(\"ar-EG\");\n    };\n\n    // Initialize\n    onMounted(() => {\n      loadLetters();\n    });\n\n    return {\n      doctorLetters,\n      parentLetters,\n      showAddDoctorLetterModal,\n      showAddParentLetterModal,\n      isUploading,\n      doctorCompletionPercentage,\n      parentCompletionPercentage,\n      handleDoctorFileUpload,\n      handleParentFileUpload,\n      uploadDoctorLetter,\n      uploadParentLetter,\n      deleteLetter,\n      downloadDoctorTemplate,\n      downloadParentTemplate,\n      formatDate,\n    };\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}